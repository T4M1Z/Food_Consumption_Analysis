<!DOCTYPE html>
<html>
    <head>
    <script src="https://npmcdn.com/react@15.3.1/dist/react.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js"></script>
<script src="https://unpkg.com/react@15.0.1/dist/react-with-addons.js"></script>
<script src="https://unpkg.com/react-dom@15.0.1/dist/react-dom.js"></script>
<script src="https://npmcdn.com/rd3@0.6.3/build/public/js/react-d3.js"></script>
        <link href="http://getbootstrap.com/dist/css/bootstrap.css" rel="stylesheet">




    </head>
    <body>
        <div class="container">
        <h1 class="page-header">Dynamic Pie Chart</h1>
        <div id="slider" class="col-lg-6"></div>
        <div id="container" class="col-lg-6">

</div>
</div>
  </div>
    </body>
    <script type="text/babel">



class Chart extends React.Component{
  render() {
  var PieChart = rd3.PieChart;
    //var pieData = [ {label: "First", value: 50}, {label: "Second", value: 50 }];
    return  (
        <PieChart
      data={this.props.data}
      width={450}
      height={400} 
      radius={110}
      sectorBorderColor="white"
      />
  )}
}
class Slider extends React.Component{
    render(){
        return (<div><input type='range' min='0' max='100' onChange = {this.props.sliderEvent} /></div>);
    }
}

class App extends React.Component{
            constructor(props){
                super(props);
                this.state = {
                    pieData : [
                        {label: "First", value: 50}, {label: "Second", value: 500 }
                    ]
                };  
        }
        handleSliderEvent(e){
        var slices1 = (360 * e.target.value)/100;
            var slices2 = 360 - slices1;

            var array1 = [
                { label: "First", value: slices1 },
                { label: "Second", value: slices2 }
            ];

            this.setState({pieData: array1},function(){
      console.log(this.state);

      });

        }
        render(){
        return(<div className="row">
                <Slider sliderEvent = {this.handleSliderEvent.bind(this)}/>
                <div className='col-lg-6'>
                    <Chart data = {this.state.pieData} />
                </div>
                </div>)
            }
        }
        ReactDOM.render(<App/>, document.getElementById('container'));


    </script>
</html>